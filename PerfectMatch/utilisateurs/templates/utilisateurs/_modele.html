<!DOCTYPE html>
<html lang="fr">
  {% load static %}

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Bootstrap CSS (CDN) - À charger EN PREMIER -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Icone du site -->
    <link rel="icon" href="{% static 'images/favicon.ico' %}" />

    <!-- Bootstrap Icons + Google Fonts -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link href="{% static 'scss/styles.css' %}" rel="stylesheet" />

    <!-- titre du site -->
    <title>{% block title %}PerfectMatch{% endblock %}</title>
  </head>

  <body>
    <a href="#main-content" class="visually-hidden-focusable"
      >Aller au contenu</a
    >
    <header>
      <nav
        class="navbar navbar-expand-lg w-100 bg-primary"
        data-bs-theme="light"
      >
        <div class="container-fluid">
          {% if user.is_authenticated %}
          <a class="navbar-brand mx-4" href="{%url 'accueil'%}"
            ><img
              src="{% static 'images/Untitled.jpg' %}"
              alt="logo"
              class="w-75"
          /></a>
          {%else %}
          <a class="navbar-brand mx-4" href="{%url 'connexion'%}"
            ><img
              src="{% static 'images/Untitled.jpg' %}"
              alt="logo"
              class="w-75"
          /></a>
          {% endif%}
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            {% if user.is_authenticated %}
            <ul class="navbar-nav mb-2 mb-lg-0">
              <li class="nav-item">
                <a
                  class="nav-link active text-white"
                  aria-current="page"
                  href="{% url 'accueil' %}"
                  >Accueil</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link text-white" href="#">Mon compte</a>
              </li>
            </ul>
            <ul class="navbar-nav ms-auto d-flex flex-row align-items-center">
              <li class="nav-item text-center mx-2">
                <a
                  href="{% url 'deconnexion' %}"
                  class="nav-link text-decoration-none"
                  aria-label="Se déconnecter"
                >
                  <i class="bi bi-box-arrow-in-right fs-4 text-danger"></i
                  ><br />
                  <small class="text-white">Déconnexion</small>
                </a>
              </li>

              <li class="nav-item text-center mx-2">
                <a
                  class="nav-link position-relative text-decoration-none"
                  aria-label="Voir les notifications"
                  onclick="toggleNotifications()"
                >
                  <i class="bi bi-bell fs-4 text-white"></i><br />
                  <small class="text-white">Notifications</small>

                  {% if notif_count > 0 %}
                  <span class="badge bg-danger notif-badge">
                    {{ notif_count }}
                  </span>
                  {% endif %}
                </a>
              </li>
            </ul>

            {% else %}
            <div class="navbar-nav ms-auto">
              <a
                class="nav-link active btn btn-light fw-bold text-white"
                aria-current="page"
                href="{% url 'connexion' %}"
                >Connexion</a
              >
              <a
                class="nav-link btn btn-info mx-2 fw-bold text-white"
                href="{% url 'inscription' %}"
                >Inscription</a
              >
            </div>
            {% endif %}
          </div>
        </div>
      </nav>
      <div id="notif-popup"></div>
    </header>
    <main id="main-content">{%block main%}{%endblock main%}</main>
    <footer class="bg-dark text-white p-4 w-100 mt-0">
      <p>
        2025 PerfectMatch | Ozias Tasse Douanla && Marie Wideline Pierre && Vosa
        Neo. Tous droits réservés.
      </p>
    </footer>

    <a aria-labelledby="aria-returnTop" class="returnTop" href="#main-content">
      <span id="aria-returnTop" class="visually-hidden"
        >Appuyer sur Entrer pour retourner au haut de page</span
      >
      <i class="bi bi-arrow-up-circle-fill"></i>
    </a>

    {% block scriptjs %}{% endblock scriptjs %}

    <!-- Bootstrap JS Bundle (AVANT vos scripts pour que bootstrap.Modal soit disponible) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'js/script.js' %}"></script>
  </body>
</html>
